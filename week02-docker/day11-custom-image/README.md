# Day 11 – CMD and ENTRYPOINT

Day 11에서는 Docker 컨테이너의 실행 흐름과 생명주기를 이해하기 위해  
CMD와 ENTRYPOINT의 역할과 차이를 학습했다.

---

## CMD와 ENTRYPOINT의 역할

Docker 컨테이너는 실행 시 하나의 메인 프로세스를 기준으로 생명주기가 결정된다.  
CMD는 컨테이너 실행 시 기본으로 실행할 명령을 정의하며,  
`docker run` 시 전달되는 명령에 의해 쉽게 덮어쓸 수 있다.

반면 ENTRYPOINT는 컨테이너의 실행 주체를 정의하며,  
해당 컨테이너가 어떤 역할을 수행하는지를 명확히 고정하는 용도로 사용된다.

즉, CMD는 변경 가능한 기본 옵션이고,  
ENTRYPOINT는 일반적으로 변경하지 않는 실행 기준점이라고 이해했다.

---

## nginx 이미지와 daemon off 옵션

nginx는 기본적으로 실행 시 데몬 프로세스로 동작한다.  
Docker 환경에서는 메인 프로세스가 종료되면 컨테이너도 함께 종료되기 때문에,  
nginx를 그대로 실행하면 컨테이너가 즉시 종료된다.

이를 방지하기 위해 `daemon off` 옵션을 사용하여  
nginx를 포그라운드에서 실행하도록 설정했다.  
이로 인해 nginx 프로세스가 살아 있는 동안 컨테이너가 유지된다.

---

## ENTRYPOINT 스크립트의 의미

nginx 공식 이미지는 ENTRYPOINT에 쉘 스크립트를 사용한다.  
이 스크립트는 컨테이너 시작 시 설정 검사, 초기화 작업 등을 수행한 뒤  
CMD로 전달된 명령을 실행한다.

ENTRYPOINT 스크립트를 사용하면  
컨테이너 실행 전 필요한 준비 작업을 유연하게 처리할 수 있으며,  
잘못된 상태에서 서비스가 실행되는 것을 방지할 수 있다.

---

## 정리

CMD는 컨테이너 실행 시 기본 명령을 정의하고,  
ENTRYPOINT는 컨테이너의 실행 정체성을 정의한다.

컨테이너는 CMD 또는 ENTRYPOINT를 통해 실행된  
메인 프로세스가 종료되는 순간 함께 종료된다는 점을 이해했다.
